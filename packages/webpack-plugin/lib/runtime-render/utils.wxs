module.exports = {
  invoke: function (e, i) {
    const type = e.type
    const target = e.currentTarget || e.target
    const eventConfigs = target.dataset.eventconfigs || {}
    const curEventConfig = eventConfigs[type] || []
    const stopPropagation = curEventConfig.every(function (config) {
      return config[config.length - 1] !== '__mpx_catch'
    })
    i.callMethod('__invoke', e)
    if (__mpx_mode__ === 'wx') {
      return stopPropagation
    } else if (__mpx_mode__ === 'ali') {
      if (!stopPropagation) {
        e.stopPropagation()
      }
    }
  },
  b: function (v, d) { return v === undefined ? d : v }
}
