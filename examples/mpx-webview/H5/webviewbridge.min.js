/**
 * mpxjs webview bridge v2.8.1
 * (c) 2023 @mpxjs team
 * @license Apache
 */
/**
 * mpxjs webview bridge v2.8.1
 * (c) 2023 @mpxjs team
 * @license Apache
 */
var e,t;e=this,t=function(){"use strict";function e(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function t(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var o=function(o){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?e(Object(a),!0).forEach((function(e){t(o,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))}))}return o}({wx:{url:"https://res.wx.qq.com/open/js/jweixin-1.3.2.js"},qq:{url:"https://qqq.gtimg.cn/miniprogram/webview_jssdk/qqjssdk-1.0.0.js"},ali:{url:"https://appx/web-view.min.js"},baidu:{url:"https://b.bdstatic.com/searchbox/icms/searchbox/js/swan-2.0.4.js"},tt:{url:"https://s3.pstatp.com/toutiao/tmajssdk/jssdk.js"}},window.sdkUrlMap),n=null,a=0,r={},i=navigator.userAgent;i.indexOf("AlipayClient")>-1?n="my":i.toLowerCase().indexOf("miniprogram")>-1?n=i.indexOf("QQ")>-1?"qq":"wx":i.indexOf("swan")>-1?n="swan":i.indexOf("toutiao")>-1?n="tt":(n="web",window.addEventListener("message",(function(e){e.data.isMpxWebview&&(n="web",window.parent.postMessage({type:"load",detail:{load:!0}},"*"));var t=e.data,o=t.callbackId,a=t.error,i=t.result;void 0!==o&&r[o]&&(a?r[o](a):r[o](null,i),delete r[o])}),!1));var c={config:function(e){if("wx"===n){if(window.wx){if(!e)return void console.log("\u5fae\u4fe1\u73af\u5883\u4e0b\u9700\u8981\u914d\u7f6ewx.config\u624d\u80fd\u6302\u8f7d\u65b9\u6cd5");window.wx.config(e)}}else console.log("\u975e\u5fae\u4fe1\u73af\u5883\u4e0d\u9700\u8981\u914d\u7f6econfig")}};function s(e){if("[object Object]"!==Object.prototype.toString.call(e))return e;var t={};for(var o in e)"function"!=typeof e[o]&&(t[o]=e[o]);return t}function p(e,t){if("getEnv"!==e){var o=++a;r[o]=function(e,n){e?(t.fail&&t.fail(e),t.complete&&t.complete(e)):(t.success&&t.success(n),t.complete&&t.complete(n)),delete r[o]},window.parent.postMessage&&window.parent.postMessage({type:e,callbackId:a,detail:{data:s(t)}},"*")}else t({miniprogram:!1})}var d=function(e){var t={wx:{keyName:"miniProgram",api:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","postMessage","getEnv"]},tt:{keyName:"miniProgram",api:["redirectTo","navigateTo","switchTab","reLaunch","navigateBack","setSwipeBackModeSync","postMessage","getEnv","checkJsApi","chooseImage","compressImage","previewImage","uploadFile","getNetworkType","openLocation","getLocation"]},swan:{keyName:"webView",api:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","getEnv","postMessage"]},qq:{keyName:"miniProgram",api:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","getEnv","postMessage"]}}[n]||{},o={wx:["checkJSApi","chooseImage","previewImage","uploadImage","downloadImage","getLocalImgData","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","translateVoice","getNetworkType","openLocation","getLocation","startSearchBeacons","stopSearchBeacons","onSearchBeacons","scanQRCode","chooseCard","addCard","openCard"],my:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","chooseImage","previewImage","getLocation","openLocation","alert","showLoading","hideLoading","getNetworkType","startShare","tradePay","postMessage","onMessage","getEnv"],swan:["makePhoneCall","setClipboardData","getNetworkType","openLocation","getLocation","chooseLocation","chooseImage","previewImage","openShare","navigateToSmartProgram"],web:["navigateTo","navigateBack","switchTab","reLaunch","redirectTo","getEnv","postMessage","getLoadError","getLocation"]}[n]||{};(t.api||[]).forEach((function(o){c[o]=function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e.then((function(){var e;(e=window[n][t.keyName])[o].apply(e,r)}))}})),o.forEach((function(t){c[t]=function(){for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return"web"===n?p.apply(void 0,[t].concat(a)):e.then((function(){var e;(e=window[n])[t].apply(e,a)}))}}))};return function(){if(null===n)return console.log("mpxjs/webview: \u672a\u8bc6\u522b\u7684\u73af\u5883\uff0c\u5f53\u524d\u4ec5\u652f\u6301 \u5fae\u4fe1\u3001\u652f\u4ed8\u5b9d\u3001\u767e\u5ea6\u3001\u5934\u6761 QQ \u5c0f\u7a0b\u5e8f"),void d();var e=window[n]||"web"===n?Promise.resolve():o[n].url?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.time,n=void 0===o?5e3:o,a=t.crossOrigin,r=void 0!==a&&a;function i(){return new Promise((function(t,o){var n=document.createElement("script");n.type="text/javascript",n.async="async",r&&(n.crossOrigin="anonymous"),n.onload=n.onreadystatechange=function(){this.readyState&&!/^(loaded|complete)$/.test(this.readyState)||(t(),n.onload=n.onreadystatechange=null)},n.onerror=function(){o(new Error("load ".concat(e," error"))),n.onerror=null},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}))}function c(){return new Promise((function(t,o){setTimeout((function(){o(new Error("load ".concat(e," timeout")))}),n)}))}return Promise.race([i(),c()])}(o[n].url,{crossOrigin:!!o[n].crossOrigin}):Promise.reject(new Error("\u672a\u627e\u5230\u5bf9\u5e94\u7684sdk"));d(e)}(),c},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).mpx=t();